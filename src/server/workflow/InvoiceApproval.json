{
  "name": "InvoiceApproval",
  "initialState": "inspectionRequired",
  "finalStates": ["archived"],
  "objectStateFieldName": "status",
  "transitions": [
    {
      "from": "inspectionRequired",
      "event": "inspect",
      "to": "approvalRequired",
      "guards": [
        {
          "name": "userHasRole",
          "arguments": {
            "role": "invoice-inspector"
          }
        }
      ],
      "actions": [
        {
          "name": "updateComment",
          "arguments": {
            "commentFieldName": "commentary"
          }
        }
      ]
    },
    {
      "from": "inspectionRequired",
      "event": "postComment",
      "to": "inspectionRequired",
      "guards": [
        {
          "name": "userHasRole",
          "arguments": {
            "role": "invoice-inspector"
          }
        }
      ],
      "actions": [
        {
          "name": "updateComment",
          "arguments": {
            "commentFieldName": "commentary"
          }
        }
      ]
    },
    {
      "from": "inspectionRequired",
      "event": "sendToClarification",
      "to": "inspClrRequired",
      "guards": [
        {
          "name": "userHasRole",
          "arguments": {
            "role": "invoice-inspector"
          }
        }
      ],
      "actions": [
        {
          "name": "updateComment",
          "arguments": {
            "commentFieldName": "commentary"
          }
        }
      ]
    },
    {
      "from": "inspClrRequired",
      "event": "clarifyForInspection",
      "to": "inspectionRequired",
      "guards": [
        {
          "name": "userHasRole",
          "arguments": {
            "role": "invoice-inspector"
          }
        }
      ],
      "actions": [
        {
          "name": "updateComment",
          "arguments": {
            "commentFieldName": "commentary"
          }
        }
      ]
    },
    {
      "from": "inspClrRequired",
      "event": "postComment",
      "to": "inspClrRequired",
      "guards": [
        {
          "name": "userHasRole",
          "arguments": {
            "role": "invoice-inspector"
          }
        }
      ],
      "actions": [
        {
          "name": "updateComment",
          "arguments": {
            "commentFieldName": "commentary"
          }
        }
      ]
    },
    {
      "from": "approvalRequired",
      "event": "approve",
      "to": "archived",
      "guards": [
        {
          "name": "userHasRole",
          "arguments": {
            "role": "invoice-approver"
          }
        }
      ],
      "actions": [
        {
          "name": "updateComment",
          "arguments": {
            "commentFieldName": "commentary"
          }
        }
      ]
    },
    {
      "from": "approvalRequired",
      "event": "postComment",
      "to": "approvalRequired",
      "guards": [
        {
          "name": "userHasRole",
          "arguments": {
            "role": "invoice-approver"
          }
        }
      ],
      "actions": [
        {
          "name": "updateComment",
          "arguments": {
            "commentFieldName": "commentary"
          }
        }
      ]
    },
    {
      "from": "approvalRequired",
      "event": "sendToClarification",
      "to": "appClrRequired",
      "guards": [
        {
          "name": "userHasRole",
          "arguments": {
            "role": "invoice-approver"
          }
        }
      ],
      "actions": [
        {
          "name": "updateComment",
          "arguments": {
            "commentFieldName": "commentary"
          }
        }
      ]
    },
    {
      "from": "appClrRequired",
      "event": "clarifyForApproval",
      "to": "approvalRequired",
      "guards": [
        {
          "name": "userHasRole",
          "arguments": {
            "role": "invoice-approver"
          }
        }
      ],
      "actions": [
        {
          "name": "updateComment",
          "arguments": {
            "commentFieldName": "commentary"
          }
        }
      ]
    },
    {
      "from": "appClrRequired",
      "event": "postComment",
      "to": "appClrRequired",
      "guards": [
        {
          "name": "userHasRole",
          "arguments": {
            "role": "invoice-approver"
          }
        }
      ],
      "actions": [
        {
          "name": "updateComment",
          "arguments": {
            "commentFieldName": "commentary"
          }
        }
      ]
    }
  ]
}
